(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1025a526"],{1370:function(e,t,s){"use strict";var i=s("87f8"),a=s.n(i);a.a},"2de9":function(e,t,s){"use strict";var i="http://114.115.211.170:8088/";t["a"]={IP:i,IMGURL:i+"system/file/showPicture?imageId=",LOGIN:i+"system/user/login",SHOP:i+"system/product/getProductList",SHOPDETAIL:i+"system/product/getProductListById",DELSHOP:i+"system/product/delProduct",ALLDELSHOP:i+"system/product/delProduct",DISCOUNT:i+"system/product/setProductDiscounts",DELSHOPLABAL:i+"system/product/delProductParam",DELSHOPPROP:i+"system/product/delProductProp",ADDSHOP:i+"system/product/addProduct",ADDSHOPLABAL:i+"system/product/addProductParam",ADDSHOPPROP:i+"system/product/addProductProp",EDOTSHOPPROP:i+"system/product/updProductProp",SHELVESSHOP:i+"system/product/shelvesProduct",THESHELVESSHOP:i+"system/product/theShelvesProduct",NEWSHOP:i+"system/product/setOrCancelNewProduct",PROPLIST:i+"system/shopProp/queryPropList",UPSHOP:i+"system/product/updProduct",SHUFFLING:i+"system/slides/getSlidesList",FREEZESHUFFLING:i+"system/slides/updSlides",DELSHUFFLING:i+"system/slides/delSlides",DELALLSHUFFLING:i+"system/slides/batchDeleteSlides",ADDSHUFFLING:i+"system/slides/addSlides",ALLCATEGORYLIST:i+"system/category/queryCateGoryList",CATEGORYLIST:i+"system/category/getCateGoryList",TWOCATEGORYLIST:i+"system/category/getCateGoryListByTwoLevel",ADDCATEGORY:i+"system/category/addCategory",UPCATEGORY:i+"system/category/updCategory",DELCATEGORY:i+"system/category/delCateGory",DELALLCATEGORY:i+"system/category/batchDelCateGory",ALLLABEL:i+"system/param/queryShopParamList",LABEL:i+"system/param/getShopParamKeyList",TLABEL:i+"system/param/getShopParamValueList",ADDLABEL:i+"system/param/addShopParamType",ADDTLABEL:i+"system/param/addShopParamValue",DELLABEL:i+"system/param/delShopParamType",DELTLABEL:i+"system/param/delShopParamValue",EDITLABEL:i+"system/param/updShopParamType",EDTITLABEL:i+"system/param/updShopParamValue",DELALLTABEL:i+"system/param/batchDelShopParamType",DELALLTTABEL:i+"system/param/batchDelShopParamValue",SPECKEY:i+"system/shopProp/getListKey",SPECVALUE:i+"system/shopProp/getListValue",ADDSPECKEY:i+"system/shopProp/addPropKey",ADDSPECVALUE:i+"system/shopProp/addPropValue",UPSPECKEY:i+"system/shopProp/updPropKey",UPSPECVALUE:i+"system/shopProp/updPropValue",DELSPECKEY:i+"system/shopProp/delPropKey",DELSPECVALUE:i+"system/shopProp/delPropValue",DELALLSPECKEY:i+"system/shopProp/batchDelPropKey",DELALLSPECVALUE:i+"system/shopProp/batchDelPropValue",DISTRIBUTION:i+"system/distribution/getStoreDistribution",ADDDISTRIBUTION:i+"system/distribution/addDistribution",UPDISTRIBUTION:i+"system/distribution/updateDistribution",DELDISTRIBUTION:i+"system/distribution/delDistribution",DELALLDISTRIBUTION:i+"system/distribution/batchDelDistribution",SERVICE:i+"system/support/getCustomerService",UPSERVICE:i+"system/support/updateCustomerService",HELP:i+"system/help/getSysHelpList",ADDHELP:i+"system/help/addHelp",UPHELP:i+"system/help/updateSysHelpList",DELHELP:i+"system/help/deleteSysHelpList",DELALLHELP:i+"system/help/batchDeleteSysHelpList",FEEDBACK:i+"system/support/getUsersMessageList",DEALWITHFEEDBACK:i+"system/support/dealWithMessage",DEALWITHALLFEEDBACK:i+"system/support/batchDealWithMessage",TREND:i+"system/trend/getTrendList",TRENDSHOP:i+"system/trend/getTrendProductList",ADDTRENDSHOP:i+"system/trend/addTrendProduct",ADDTREND:i+"system/trend/addTrend",ADDALLTRENDSHOP:i+"system/trend/batchAddTrendProduct",DELALLTREND:i+"system/trend/batchDelTrend",DELALLTRENDPRODUCT:i+"system/trend/batchDelTrendProduct",DELTREND:i+"system/trend/delTrendProduct",DELTRENDSHOP:i+"system/trend/delTrendProduct",UPTREND:i+"system/trend/updTrend",TRENDSHOPS:i+"system/product/getTrendProductList",POP:i+"system/advertising/getAdvertisingList",UPPOP:i+"system/advertising/updateAdvertising",SEARCHPOPSHOP:i+"system/product/getAdvertisingProductList",POPSHOP:i+"system/advertising/getAdvertisingProductList",POPSHOPS:i+"system/product/getAdvertisingProductList",ADDALLPOPSHOP:i+"system/advertising/batchAddAdvertisingProduct",DELPOPSHOP:i+"system/advertising/delAdvertisingProduct",DELALLPOPSHOP:i+"system/advertising/batchDelAdvertisingProduct"}},3626:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table"},[s("div",{staticClass:"handle-box"},[s("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.addSlide}},[e._v("增加")]),s("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.delSlide}},[e._v("批量删除")])],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,align:"center"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"slidesId",label:"轮播图编号",sortable:"",align:"center",width:"120px"}}),s("el-table-column",{attrs:{prop:"typeId",label:"类型编号",sortable:"",align:"center",width:"110px"}}),s("el-table-column",{attrs:{prop:"shopId",label:"商品编号",sortable:"",align:"center",width:"110px"}}),s("el-table-column",{attrs:{prop:"slideSort",label:"显示顺序",sortable:"",align:"center",width:"110px"}}),s("el-table-column",{attrs:{prop:"imageUrl",label:"标题",width:"200",align:"center"}}),s("el-table-column",{attrs:{label:"图片",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("img",{staticClass:"goods-img",attrs:{src:e.IMGURL+t.row.slideImage},on:{click:function(s){return e.previewImg(e.IMGURL+t.row.slideImage)}}})]}}])}),s("el-table-column",{attrs:{prop:"createdTime",label:"时间",width:"170",align:"center"}}),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isEffect?s("div",[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleFreeze(t.$index,t.row,2)}}},[e._v("冻结")]),s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleModify(t.$index,t.row)}}},[e._v("修改")]),s("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1):s("div",[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleFreeze(t.$index,t.row,1)}}},[e._v("解冻")]),s("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("\n                       删除\n                    ")])],1)]}}])})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","page-size":e.pageSize,layout:"prev, pager, next",total:e.totals},on:{"current-change":e.handleCurrentChange}})],1),s("el-dialog",{attrs:{title:"预览",visible:e.previewDialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.previewDialogVisible=t}}},[s("img",{staticClass:"preview-img",attrs:{src:e.previewImgUrl}})]),s("el-dialog",{attrs:{visible:e.detailDialogVisible,width:"50%"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[s("div",{staticClass:"detail-container"},[s("el-form",{ref:"detailForm",attrs:{model:e.detailForm,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"轮播图片上传"}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:e.IP+"system/file/upload",multiple:!1,"on-success":e.handleSuccess,"on-error":e.handleError,"on-remove":e.handleRemove,"file-list":e.imgList,"list-type":"picture"}},[s("el-button",{attrs:{size:"small",type:"primary",disabled:e.imgList.length>=1}},[e._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb,建议大小833*500")])],1)],1),s("el-form-item",{attrs:{label:"标题"}},[s("el-input",{staticStyle:{width:"200px"},model:{value:e.detailForm.title,callback:function(t){e.$set(e.detailForm,"title",t)},expression:"detailForm.title"}})],1),s("el-form-item",{attrs:{label:"显示顺序"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.total,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),s("el-form-item",{attrs:{label:"分类id"}},[s("el-input",{staticStyle:{width:"200px"},model:{value:e.detailForm.typeId,callback:function(t){e.$set(e.detailForm,"typeId",t)},expression:"detailForm.typeId"}})],1),s("el-form-item",{attrs:{label:"商品id"}},[s("el-input",{staticStyle:{width:"200px"},model:{value:e.detailForm.shopId,callback:function(t){e.$set(e.detailForm,"shopId",t)},expression:"detailForm.shopId"}})],1),s("p",{staticClass:"login-tips"},[e._v("Tips : 分类id和商品id只能绑定一个。")]),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddComunity}},[e._v("提交")])],1)],1)],1)])],1)},a=[],o=(s("612f"),s("3a23"),s("2de9")),r={data:function(){return{IMGURL:o["a"].IMGURL,IP:o["a"].IP,sourceData:[],tableData:[{id:"1",title:"tushu",logoSrc:"123",isShow:0}],cur_page:1,searchKey:"",previewImgUrl:"",previewDialogVisible:!1,detailDialogVisible:!1,base64Cache:{},curHandleItem:null,isModify:!1,detailForm:{url:"",title:"",informationId:""},imgList:[],totals:0,pageSize:10,value:"",total:"",multipleSelection:""}},created:function(){this.getSlideList()},watch:{},methods:{handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.map(function(e){return t.multipleSelection.push(e.slidesId)})},delSlide:function(){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={slidesIdList:e.multipleSelection};e.$axios.post(o["a"].DELALLSHUFFLING,t,{headers:{token:sessionStorage.getItem("token")}}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),0==t.data.code&&(e.$message.success("删除成功！"),e.getSlideList())})}).catch(function(){})},handleCurrentChange:function(e){this.cur_page=e,this.getSlideList()},search:function(){var e=this.searchKey.trim();this.tableData=_cloneDeep(this.sourceData.filter(function(t){return""===e||t.id===e}))},getSlideList:function(){var e=this,t={};t.pageSize=this.pageSize,t.pageNo=this.cur_page,this.$axios.get(o["a"].SHUFFLING,{headers:{token:sessionStorage.getItem("token")},params:t}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),console.log(t),0==t.data.code&&(t.data.data.list.map(function(e){1==e.objectType?e.typeId=e.objectId:2==e.objectType&&(e.shopId=e.objectId)}),e.tableData=t.data.data.list,e.totals=t.data.data.total,e.total=t.data.data.total+1)})},handleFreeze:function(e,t,s){var i=this;this.$axios.post(o["a"].FREEZESHUFFLING,{slidesId:t.slidesId,isEffect:s},{headers:{token:sessionStorage.getItem("token")}}).then(function(e){if(console.log(e),"-30"==e.data.code&&(i.$message.error("登录超时，请重新登录！"),setTimeout(function(){i.$router.push("/login")},3e3)),0!=e.data.code)return i.$message.error(e.data.code.msg);i.$message.success("修改成功"),i.getSlideList()})},previewImg:function(e){""!==e&&(this.previewDialogVisible=!0,this.previewImgUrl=e)},handleModify:function(e,t){this.curHandleItem=t,this.detailDialogVisible=!0,this.isModify=!0,console.log(t),this.detailForm={url:this.IMGURL+t.slideImage,title:t.imageUrl,typeId:t.typeId,shopId:t.shopId},this.value=t.slideSort,this.imgList=[].concat({url:this.IMGURL+t.slideImage})},addSlide:function(){this.detailDialogVisible=!0,this.isModify=!1,this.detailForm={url:"",title:"",objectType:""},this.imgList=[]},handleSuccess:function(e,t,s){console.log(e,t,s),this.$message.success("图片上传成功"),this.detailForm.url=e.data,this.imgList[0]={name:t.name,url:t.url}},handleError:function(e,t,s){this.$message.error("图片上传失败")},handleDelete:function(e,t){var s=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.slidesId;s.$axios.post(o["a"].DELSHUFFLING,{slidesId:e},{headers:{token:sessionStorage.getItem("token")}}).then(function(e){"-30"==e.data.code&&(s.$message.error("登录超时，请重新登录！"),setTimeout(function(){s.$router.push("/login")},3e3)),0==e.data.code&&(s.$message.success("删除成功！"),s.getSlideList()),console.log(e)})}).catch(function(){})},confirmAddComunity:function(){var e=this;if(!this.detailForm.url||!this.detailForm.title)return this.$message.error("请将信息填写完整");if(this.detailForm.shopId&&this.detailForm.typeId)return this.$message.error("分类ID和商品ID只能绑定其中一个");console.log(this.detailForm);var t={slideImage:this.detailForm.url,objectId:this.detailForm.objectId||"",objectType:this.detailForm.objectType||"",imageUrl:this.detailForm.title,slideSort:this.value,isEffect:1};if(this.detailForm.shopId?(t.objectId=this.detailForm.shopId,t.objectType=2):this.detailForm.typeId?(t.objectId=this.detailForm.typeId,t.objectType=1):(t.objectId="",t.objectType=""),this.isModify){t.slidesId=this.curHandleItem.slidesId;var s=t.slideImage.indexOf("=");t.slideImage=t.slideImage.substring(s+1,t.slideImage.length),console.log(t.slidesId),this.$axios.post(o["a"].FREEZESHUFFLING,t,{headers:{token:sessionStorage.getItem("token")}}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),0==t.data.code&&(e.$message.success("添加成功"),e.detailDialogVisible=!1,e.getSlideList())})}else this.$axios.post(o["a"].ADDSHUFFLING,t,{headers:{token:sessionStorage.getItem("token")}}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),0==t.data.code&&(e.$message.success("添加成功"),e.detailDialogVisible=!1,e.getSlideList())})},handleRemove:function(e){this.imgList.forEach(function(t,s,i){t.uid===e.uid&&i.splice(s,1)}),this.detailForm.url=""}}},l=r,d=(s("1370"),s("17cc")),n=Object(d["a"])(l,i,a,!1,null,"728a1a4d",null);t["default"]=n.exports},"87f8":function(e,t,s){}}]);