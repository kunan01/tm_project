(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1025a526"],{1370:function(e,t,i){"use strict";var s=i("87f8"),a=i.n(s);a.a},"2de9":function(e,t,i){"use strict";var s="http://114.115.211.170:8088/";t["a"]={IP:s,IMGURL:s+"system/file/showPicture?imageId=",LOGIN:s+"system/user/login",SHUFFLING:s+"system/slides/getSlidesList",FREEZESHUFFLING:s+"system/slides/updSlides",DELSHUFFLING:s+"system/slides/delSlides",DELALLSHUFFLING:s+"system/slides/batchDeleteSlides",ADDSHUFFLING:s+"system/slides/addSlides",CATEGORYLIST:s+"system/category/getCateGoryList",ADDCATEGORY:s+"system/category/addCategory",UPCATEGORY:s+"system/category/updCategory",DELCATEGORY:s+"system/category/delCateGory",DELALLCATEGORY:s+"system/category/batchDelCateGory",LABEL:s+"system/param/getShopParamKeyList",TLABEL:s+"system/param/getShopParamValueList",ADDLABEL:s+"system/param/addShopParamType",ADDTLABEL:s+"system/param/addShopParamValue",DELLABEL:s+"system/param/delShopParamType",DELTLABEL:s+"system/param/delShopParamValue",EDITLABEL:s+"system/param/updShopParamType",EDTITLABEL:s+"system/param/updShopParamValue",DELALLTABEL:s+"system/param/batchDelShopParamType",DELALLTTABEL:s+"system/param/batchDelShopParamValue",SPECKEY:s+"system/shopProp/getListKey",SPECVALUE:s+"system/shopProp/getListValue",ADDSPECKEY:s+"system/shopProp/addPropKey",ADDSPECVALUE:s+"system/shopProp/addPropValue",UPSPECKEY:s+"system/shopProp/updPropKey",UPSPECVALUE:s+"system/shopProp/updPropValue",DELSPECKEY:s+"system/shopProp/delPropKey",DELSPECVALUE:s+"system/shopProp/delPropValue",DELALLSPECKEY:s+"system/shopProp/batchDelPropKey",DELALLSPECVALUE:s+"system/shopProp/batchDelPropValue",DISTRIBUTION:s+"system/distribution/getStoreDistribution",ADDDISTRIBUTION:s+"system/distribution/addDistribution",UPDISTRIBUTION:s+"system/distribution/updateDistribution",DELDISTRIBUTION:s+"system/distribution/delDistribution",DELALLDISTRIBUTION:s+"system/distribution/batchDelDistribution",SERVICE:s+"system/support/getCustomerService",UPSERVICE:s+"system/support/updateCustomerService"}},3626:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.addSlide}},[e._v("增加")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:e.delSlide}},[e._v("批量删除")])],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,align:"center"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),i("el-table-column",{attrs:{prop:"slidesId",label:"轮播图编号",sortable:"",align:"center",width:"120px"}}),i("el-table-column",{attrs:{prop:"typeId",label:"类型编号",sortable:"",align:"center",width:"110px"}}),i("el-table-column",{attrs:{prop:"shopId",label:"商品编号",sortable:"",align:"center",width:"110px"}}),i("el-table-column",{attrs:{prop:"slideSort",label:"显示顺序",sortable:"",align:"center",width:"110px"}}),i("el-table-column",{attrs:{prop:"imageUrl",label:"标题",width:"200",align:"center"}}),i("el-table-column",{attrs:{label:"图片",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("img",{staticClass:"goods-img",attrs:{src:e.IMGURL+t.row.slideImage},on:{click:function(i){return e.previewImg(e.IMGURL+t.row.slideImage)}}})]}}])}),i("el-table-column",{attrs:{prop:"createdTime",label:"时间",width:"170",align:"center"}}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isEffect?i("div",[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleFreeze(t.$index,t.row,2)}}},[e._v("冻结")]),i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleModify(t.$index,t.row)}}},[e._v("修改")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1):i("div",[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleFreeze(t.$index,t.row,1)}}},[e._v("解冻")]),i("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("\n                       删除\n                    ")])],1)]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"","page-size":e.pageSize,layout:"prev, pager, next",total:e.totals},on:{"current-change":e.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:"预览",visible:e.previewDialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.previewDialogVisible=t}}},[i("img",{staticClass:"preview-img",attrs:{src:e.previewImgUrl}})]),i("el-dialog",{attrs:{visible:e.detailDialogVisible,width:"50%"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[i("div",{staticClass:"detail-container"},[i("el-form",{ref:"detailForm",attrs:{model:e.detailForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"轮播图片上传"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.IP+"system/file/upload",multiple:!1,"on-success":e.handleSuccess,"on-error":e.handleError,"on-remove":e.handleRemove,"file-list":e.imgList,"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary",disabled:e.imgList.length>=1}},[e._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb,建议大小833*500")])],1)],1),i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.detailForm.title,callback:function(t){e.$set(e.detailForm,"title",t)},expression:"detailForm.title"}})],1),i("el-form-item",{attrs:{label:"显示顺序"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.total,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),i("el-form-item",{attrs:{label:"分类id"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.detailForm.typeId,callback:function(t){e.$set(e.detailForm,"typeId",t)},expression:"detailForm.typeId"}})],1),i("el-form-item",{attrs:{label:"商品id"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.detailForm.shopId,callback:function(t){e.$set(e.detailForm,"shopId",t)},expression:"detailForm.shopId"}})],1),i("p",{staticClass:"login-tips"},[e._v("Tips : 分类id和商品id只能绑定一个。")]),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddComunity}},[e._v("提交")])],1)],1)],1)])],1)},a=[],o=(i("612f"),i("3a23"),i("2de9")),l={data:function(){return{IMGURL:o["a"].IMGURL,IP:o["a"].IP,sourceData:[],tableData:[{id:"1",title:"tushu",logoSrc:"123",isShow:0}],cur_page:1,searchKey:"",previewImgUrl:"",previewDialogVisible:!1,detailDialogVisible:!1,base64Cache:{},curHandleItem:null,isModify:!1,detailForm:{url:"",title:"",informationId:""},imgList:[],totals:0,pageSize:10,value:"",total:"",multipleSelection:""}},created:function(){this.getSlideList()},watch:{},methods:{handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.map(function(e){return t.multipleSelection.push(e.slidesId)})},delSlide:function(){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={slidesIdList:e.multipleSelection};e.$axios.post(o["a"].DELALLSHUFFLING,t,{headers:{token:sessionStorage.getItem("token")}}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),0==t.data.code&&(e.$message.success("删除成功！"),e.getSlideList())})}).catch(function(){})},handleCurrentChange:function(e){this.cur_page=e,this.getSlideList()},search:function(){var e=this.searchKey.trim();this.tableData=_cloneDeep(this.sourceData.filter(function(t){return""===e||t.id===e}))},getSlideList:function(){var e=this,t={};t.pageSize=this.pageSize,t.pageNo=this.cur_page,this.$axios.get(o["a"].SHUFFLING,{headers:{token:sessionStorage.getItem("token")},params:t}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),console.log(t),0==t.data.code&&(t.data.data.list.map(function(e){1==e.objectType?e.typeId=e.objectId:2==e.objectType&&(e.shopId=e.objectId)}),e.tableData=t.data.data.list,e.totals=t.data.data.total,e.total=t.data.data.total+1)})},handleFreeze:function(e,t,i){var s=this;this.$axios.post(o["a"].FREEZESHUFFLING,{slidesId:t.slidesId,isEffect:i},{headers:{token:sessionStorage.getItem("token")}}).then(function(e){if(console.log(e),"-30"==e.data.code&&(s.$message.error("登录超时，请重新登录！"),setTimeout(function(){s.$router.push("/login")},3e3)),0!=e.data.code)return s.$message.error(e.data.code.msg);s.$message.success("修改成功"),s.getSlideList()})},previewImg:function(e){""!==e&&(this.previewDialogVisible=!0,this.previewImgUrl=e)},handleModify:function(e,t){this.curHandleItem=t,this.detailDialogVisible=!0,this.isModify=!0,console.log(t),this.detailForm={url:this.IMGURL+t.slideImage,title:t.imageUrl,typeId:t.typeId,shopId:t.shopId},this.value=t.slideSort,this.imgList=[].concat({url:this.IMGURL+t.slideImage})},addSlide:function(){this.detailDialogVisible=!0,this.isModify=!1,this.detailForm={url:"",title:"",objectType:""},this.imgList=[]},handleSuccess:function(e,t,i){console.log(e,t,i),this.$message.success("图片上传成功"),this.detailForm.url=e.data,this.imgList[0]={name:t.name,url:t.url}},handleError:function(e,t,i){this.$message.error("图片上传失败")},handleDelete:function(e,t){var i=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.slidesId;i.$axios.post(o["a"].DELSHUFFLING,{slidesId:e},{headers:{token:sessionStorage.getItem("token")}}).then(function(e){"-30"==e.data.code&&(i.$message.error("登录超时，请重新登录！"),setTimeout(function(){i.$router.push("/login")},3e3)),0==e.data.code&&(i.$message.success("删除成功！"),i.getSlideList()),console.log(e)})}).catch(function(){})},confirmAddComunity:function(){var e=this;if(!this.detailForm.url||!this.detailForm.title)return this.$message.error("请将信息填写完整");if(this.detailForm.shopId&&this.detailForm.typeId)return this.$message.error("分类ID和商品ID只能绑定其中一个");console.log(this.detailForm);var t={slideImage:this.detailForm.url,objectId:this.detailForm.objectId||"",objectType:this.detailForm.objectType||"",imageUrl:this.detailForm.title,slideSort:this.value,isEffect:1};if(this.detailForm.shopId?(t.objectId=this.detailForm.shopId,t.objectType=2):this.detailForm.typeId?(t.objectId=this.detailForm.typeId,t.objectType=1):(t.objectId="",t.objectType=""),this.isModify){t.slidesId=this.curHandleItem.slidesId;var i=t.slideImage.indexOf("=");t.slideImage=t.slideImage.substring(i+1,t.slideImage.length),console.log(t.slidesId),this.$axios.post(o["a"].FREEZESHUFFLING,t,{headers:{token:sessionStorage.getItem("token")}}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),0==t.data.code&&(e.$message.success("添加成功"),e.detailDialogVisible=!1,e.getSlideList())})}else this.$axios.post(o["a"].ADDSHUFFLING,t,{headers:{token:sessionStorage.getItem("token")}}).then(function(t){"-30"==t.data.code&&(e.$message.error("登录超时，请重新登录！"),setTimeout(function(){e.$router.push("/login")},3e3)),0==t.data.code&&(e.$message.success("添加成功"),e.detailDialogVisible=!1,e.getSlideList())})},handleRemove:function(e){this.imgList.forEach(function(t,i,s){t.uid===e.uid&&s.splice(i,1)}),this.detailForm.url=""}}},r=l,n=(i("1370"),i("17cc")),d=Object(n["a"])(r,s,a,!1,null,"728a1a4d",null);t["default"]=d.exports},"87f8":function(e,t,i){}}]);